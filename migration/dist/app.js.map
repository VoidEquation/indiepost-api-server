{"version":3,"sources":["app.js"],"names":["mysql","require","imageMigration","pool","createPool","host","user","password","database","options","oldBasePath","newBasePath","newBaseUrl","selectTitleImagesQuery","selectContentImagesQuery","updateTitleImageQuery","updateContentImageQuery","migrate","then","end"],"mappings":";;AAAA,IAAMA,QAAQC,QAAQ,eAAR,CAAd;AACA,IAAMC,iBAAiBD,QAAQ,mBAAR,CAAvB;;AAEA,IAAME,OAAOH,MAAMI,UAAN,CAAiB;AAC1BC,UAAM,WADoB;AAE1BC,UAAM,WAFoB;AAG1BC,cAAU,WAHgB;AAI1BC,cAAU;AAJgB,CAAjB,CAAb;;AAOA,IAAMC,UAAU;AACZC,iBAAa,mBADD;AAEZC,iBAAa,OAFD;AAGZC,gBAAY,iBAHA;AAIZC,4BAAwB,iEAJZ;AAKZC,8BAA0B,kJALd;AAMZC,2BAAuB,0FANX;AAOZC,6BAAyB;AAPb,CAAhB;;AAUAd,eAAee,OAAf,CAAuBd,IAAvB,EAA6BM,OAA7B,EAAsCS,IAAtC,CAA2C,YAAM;AAC7Cf,SAAKgB,GAAL;AACH,CAFD","file":"app.js","sourcesContent":["const mysql = require('promise-mysql');\nconst imageMigration = require('./image-migration');\n\nconst pool = mysql.createPool({\n    host: 'localhost',\n    user: 'indiepost',\n    password: 'indiepost',\n    database: 'indiepost'\n});\n\nconst options = {\n    oldBasePath: '/home/jake/backup',\n    newBasePath: '/data',\n    newBaseUrl: '/uploads/images',\n    selectTitleImagesQuery: 'SELECT no, IMAGEURL as data, REGDATE as date FROM __contentlist', \n    selectContentImagesQuery: 'SELECT d.no, d.data, c.REGDATE as date FROM __contentlist AS c INNER JOIN __detaillist AS d ON c.no = d.parent WHERE d.type = 2 AND d.iorder > 2',\n    updateTitleImageQuery: 'UPDATE __contentlist SET IMAGEURL = ?, width = ?, height = ?, thumbnail = ? WHERE NO = ?',\n    updateContentImageQuery: 'UPDATE __detaillist SET data = ?, width = ?, height = ?, thumbnail = ? WHERE NO = ?',\n};\n\nimageMigration.migrate(pool, options).then(() => {\n    pool.end();\n});"],"sourceRoot":"../src"}